---
extends: http://vwf.example.com/scene.vwf
methods:
  initializeCamera:
  initializeGame:
children:
  playerOne:
    extends: http://vwf.example.com/node3.vwf
    source: paddle.dae
    children:
      paddleMaterial:
        extends: http://vwf.example.com/material.vwf
        properties:
          color: "#ff0000"
  playerTwo:
    extends: http://vwf.example.com/node3.vwf
    source: paddle.dae
    properties:
      translation: [470, 0, 0]
    children:
      material:
        extends: http://vwf.example.com/material.vwf
        properties:
          color: "#ff0000"
  ball:
    extends: http://vwf.example.com/node3.vwf
    source: ball.dae
    properties:
      xSpeed: 1
      ySpeed: 3
    children:
      material:
        extends: http://vwf.example.com/material.vwf
        properties:
          color: "#0000ff"
    methods:
      bounce: |
        var topX = 230;
        var topY = 145;
        var bottomY = -145;
        var bottomX = -230;
        //
        var trans = this.translation;
        var newTrans = [ trans[0] + this.xSpeed, trans[1] + this.ySpeed, trans[2] ];
        if (newTrans[1] >= topY) {
          // Wall was hit
          newTrans[1] = topY;
          this.ySpeed = -this.ySpeed;
        } else if (newTrans[1] <= bottomY) {
          newTrans[1] = bottomY;
          this.ySpeed = -this.ySpeed;
        }
        this.translateTo( newTrans );
        this.future( 0.05 ).bounce();  // schedule the next step
  board:
    extends: http://vwf.example.com/node3.vwf
    source: board.dae
  dir1:
    extends: http://vwf.example.com/light.vwf
    properties:
      lightType: "point"
      enable: true
      distance: 2000
      intensity: 2
      color: [ 128, 128, 128 ]
      translation: [ 400, 400, 900 ]
camera:
  translation: [250,-500,100]
scripts:
- |
    this.initialize = function() {
      this.future( 0 ).initializeCamera();
      this.future( 0 ).initializeGame();
    }
    this.initializeCamera = function() {
      this.camera.translation = [ 250, -550, 150 ];
      this.camera.rotation = [ 1, 0, 0, -10 ];
    }
    this.initializeGame = function() {
      this.ball.bounce();
    }
